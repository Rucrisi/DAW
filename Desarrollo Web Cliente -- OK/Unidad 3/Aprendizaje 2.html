<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambiar color de fondo</title>
    <style>
            body {
                background-color: white; /* Color de fondo original */
            }
            .buttons{
                position: absolute;
                top: 10px;
                right: 10px;
            }
    </style>
</head>
<body>
    <div class="buttons">
        <button onclick=" fondoRojo()">Fondo Rojo</button>
        <button onclick=" fondoVerde()">Fondo Verde</button>
        <button onclick=" fondoAmarillo()">Fondo Amarillo</button>
        <button onclick=" fondoAzul()">Fondo Azul</button>
        <button onclick=" fondoOriginal()">Fondo Original</button>
    </div>

    <button onclick="nuevaVentana()">Mostrar color seleccionado</button>

    <h1>Bienvenido a la página de cambio de color con cookies</h1>
    <p>Elige un color de fondo. Este color se recordará la próxima vez que visites esta página.</p>

    <script>
        // Función para establecer una cookie
        function setCookie(name, value) {
            document.cookie = name + "=" + value;
        }

        // Función para obtener el valor de la ultima cookie
        function getCookie(name) {
            const cookieArray = document.cookie.split(';');
            for (let i = 0; i < cookieArray.length; i++) {
                let cookie = cookieArray[i].trim();
                if (cookie.indexOf(name + "=") === 0) {
                    return cookie.substring((name + "=").length, cookie.length);
                }
            }
            return "";
        }

        // Al cargar la pagina
        window.onload = function() {
            document.body.style.backgroundColor = getCookie("color");
        };

        // Abrir nueva ventana mostrando el color seleccionado
        function nuevaVentana() {
            const seleccion = getCookie("color");
            const ventana = window.open("", "ColorWindow", "width=400,height=200");
            ventana.document.write("<p>El color seleccionado es: " + seleccion + "</p>");
        }

        function fondoRojo() {
            document.body.style.backgroundColor = "red";
            setCookie("color",document.body.style.backgroundColor);
        }
        function fondoVerde() {
            document.body.style.backgroundColor = "green";
            setCookie("color",document.body.style.backgroundColor);
        }
        function fondoAmarillo() {
            document.body.style.backgroundColor = "yellow";
            setCookie("color",document.body.style.backgroundColor);
        }
        function fondoAzul() {
            document.body.style.backgroundColor = "blue";
            setCookie("color",document.body.style.backgroundColor);
        }

        let originalColor;
        originalColor = getComputedStyle(document.body).backgroundColor; // Funcion para guardar el color original

        function fondoOriginal() {
            document.body.style.backgroundColor = originalColor;
            setCookie("color",document.body.style.backgroundColor);
        }
    </script>
</body>
</html>